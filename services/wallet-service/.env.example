# ============================================================================
# Shield Auth Service - Environment Configuration
# ============================================================================
# 
# HOW TO USE:
# 1. Copy this file to .env: cp .env.example .env
# 2. Set ENVIRONMENT=development or ENVIRONMENT=production
# 3. The service will automatically use the appropriate configuration
#
# ============================================================================

# ============================================================================
# Environment Selection (REQUIRED)
# ============================================================================
# Change this to switch between development and production
# Options: development | production
ENVIRONMENT=development
NODE_ENV=development

# ============================================================================
# Database Configuration
# ============================================================================
# Development: Docker PostgreSQL (localhost)
# Production: Supabase (cloud)
# The service will use the appropriate DATABASE_URL based on ENVIRONMENT

# Development Database (used when ENVIRONMENT=development)
DATABASE_URL_DEV=postgresql://shield:shield_secure_password_2024@localhost:5432/shield_auth
# Production Database (used when ENVIRONMENT=production)
# Supabase Project Reference: tnjuaioyrldyyvqppigk
# Password: shieldtopsecretpassword4321
npm run prod# Add SSL to DATABASE_URL_PROD if not already there
DATABASE_URL_PROD=postgresql://postgres.tnjuaioyrldyyvqppigk:shieldtopsecretpassword4321@aws-1-us-east-1.pooler.supabase.com:5432/postgres?schema=shield_auth
# Auto-selected DATABASE_URL (set automatically based on ENVIRONMENT)
# You can also override by setting DATABASE_URL directly
# DATABASE_URL=

# ============================================================================
# JWT Configuration
# ============================================================================
# Development secrets (less secure, for local development only)
JWT_SECRET_DEV=dev-jwt-secret-key-minimum-64-characters-long-for-development-only-use-strong-key-in-production-12345678901234567890
JWT_REFRESH_SECRET_DEV=dev-jwt-refresh-secret-key-minimum-64-characters-long-for-development-only-use-strong-key-in-production-12345678901234567890

# Production secrets (MUST be strong and unique)
# Generate strong secrets: openssl rand -base64 64
JWT_SECRET_PROD=prod-jwt-secret-key-minimum-64-characters-long-generate-strong-random-key-for-production-12345678901234567890
JWT_REFRESH_SECRET_PROD=prod-jwt-refresh-secret-key-minimum-64-characters-long-generate-strong-random-key-for-production-12345678901234567890

# Auto-selected secrets (set automatically based on ENVIRONMENT)
# JWT_SECRET=
# JWT_REFRESH_SECRET=

JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ============================================================================
# Encryption
# ============================================================================
# Development encryption key
ENCRYPTION_KEY_DEV=dGVzdC1lbmNyeXB0aW9uLWtleS1mb3ItZGV2ZWxvcG1lbnQtb25seS1taW5pbXVtLTY0LWNoYXJhY3RlcnMtbG9uZw==

# Production encryption key (MUST be strong and unique)
# Generate: openssl rand -base64 32
ENCRYPTION_KEY_PROD=dGVzdC1lbmNyeXB0aW9uLWtleS1mb3ItcHJvZHVjdGlvbi1taW5pbXVtLTY0LWNoYXJhY3RlcnMtbG9uZw==

# Auto-selected encryption key
# ENCRYPTION_KEY=

ENCRYPTION_ALGORITHM=aes-256-gcm

# ============================================================================
# Service Configuration
# ============================================================================
PORT=3002
SERVICE_NAME=wallet-service
SERVICE_VERSION=1.0.0

# ============================================================================
# CORS Configuration
# ============================================================================
CORS_ORIGIN=http://localhost:3000,http://localhost:8080
CORS_CREDENTIALS=true

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_URL=redis://localhost:6379

# ============================================================================
# Security Settings
# ============================================================================
BCRYPT_ROUNDS=12
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION_MS=900000

# Development session secret
SESSION_SECRET_DEV=dev-session-secret-key-minimum-64-characters-long-for-development-only-use-strong-key-in-production-12345678901234567890

# Production session secret (MUST be strong and unique)
SESSION_SECRET_PROD=prod-session-secret-key-minimum-64-characters-long-generate-strong-random-key-for-production-12345678901234567890

# Auto-selected session secret
# SESSION_SECRET=

# ============================================================================
# Audit Logging
# ============================================================================
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=standard

# ============================================================================
# Security Headers
# ============================================================================
HSTS_MAX_AGE=31536000
CSP_ENABLED=true

# ============================================================================
# API Security
# ============================================================================
API_KEY_ROTATION_DAYS=90
REQUIRE_API_KEY=false

# ============================================================================
# Password Policy
# ============================================================================
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true
